@model LarchProvisionsWebsite.Models.Menu

<div class="row">
    @if (Model.Recipes != null)
            {       
        @foreach (var recipe in Model.Recipes)
                {
            <div class="col m6 l6 s6">
                <div class="card">
                    <div class="card-image waves-effect waves-block waves-ripple">
                        <img class="activator" src="@recipe.Image" alt="@recipe.RecipeName" />
                    </div>
                    <div class="card-content">
                        <span class"card-title activator"><b>@recipe.RecipeName</b><i class="material-icons right">more_vert</i></span>
                        <p>$@recipe.CustPrice per serving</p>
                        @if (User.IsInRole("Customer"))
                        {
                            @if (recipe.Orders != null)
                            {

                                @foreach (var o in recipe.Orders)
                                {
                                    <i class="material-icons">redeem</i>
                                }
                            }
                            <div class="row">
                                <div class="col s12 center">

                                    @using (Html.BeginForm("Order", "Menus", FormMethod.Post))
                                    {
                                        <input hidden name="menuId" value="@Model.MenuId" />
                                        <input hidden name="recipeId" value="@recipe.RecipeId" />
                                        <button class="btn waves-effect waves-ripple" type="submit">
                                            add order
                                        </button>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                    <div class="container recipe-description">
                    </div>
                    <div class="card-reveal">
                        <span class="card-title">@recipe.RecipeName<i class="material-icons right">close</i></span>
                        <div class="container reveal-text">
                            <h5>@recipe.Description</h5>
                            <h5>@recipe.Notes</h5>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    <div class="row container orders-display">
        <div class="col l12 m12 s12">

            <h4>your current orders total $@ViewData["CustTotal"]</h4>
            <ul>
                @if (Model.Recipes != null)
                {
                    @foreach (var recipe in Model.Recipes)
                    {
                        @if (recipe.Orders != null)
                        {

                            @foreach (var order in recipe.Orders)
                            {
                                <li>
                                    <h5>@order.RecipeName: $@recipe.CustPrice</h5>
                                    @using (Html.BeginForm("RemoveOrder", "Menus", FormMethod.Post))
                                    {
                                        <input hidden name="menuId" value="@Model.MenuId" />
                                        <input hidden name="recipeId" value="@recipe.RecipeId" />
                                        <button class="btn waves-effect waves-ripple" type="submit">
                                            remove order
                                        </button>
                                    }
                                </li>
                                <li>
                                    <div id="remove_order" class="btn waves-effect">remove with ajax</div>
                                </li>

                            }
                        }

                    }
                }
            </ul>
        </div>
    </div>
</div>